(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"525d8333b651e920c546":function(e,t,n){"use strict";n.r(t);var a=n("8af190b70a6bc55c6f1b"),o=n("726aa3b3da0ad77c5660"),i=(n("8a2d1b95e05b6a321e74"),n("a28fc3c963a1d4d1a2e5")),r=n("6938d226fd372a75cbf9"),c=n("d7dd51e1bf6bfc2c9c3d"),s=n("ab4cb61bcb2dc161defb"),l=n("435859b6b76fb67a754a"),u=n.n(l),f=n("b02fe3f80d4238b52f20"),d=n.n(f),p=n("c7fd554010f79f6c0ef8"),h=n.n(p),b=n("921c0b8c557fe6ba5da8"),m=n.n(b),v=n("2aea235afd5c55b8b19b"),g=n.n(v),y=n("49a50e5b1670c1faa0e6"),S=n.n(y),O=n("87505e050ffe1fc35d51"),w=n("5c0a236ca4c0b26f32cd"),j=n.n(w),P=n("c502bee2fd4be3dd7f62"),C=n.n(P),k=n("336be1f03a45da13ce56"),x=n.n(k),N=n("e777244f8e08c53fe98b"),T=n.n(N),_=n("432aae369667202efa42"),D=n.n(_),E=n("9c830e9234ad5c36a7e4"),R=n.n(E),I=n("2e1ad1d5a5083e84ef6b"),F=n.n(I),L=function(e){return e.get("meshState")},M=function(e){return e.get("global")},A=n("41cccede323d841b4f00");function J(e){return{type:A.c,value:e}}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U,q=function(e){return{button:{margin:e.spacing.unit},iconSmall:{fontSize:20},input:{display:"none"},leftIcon:{marginRight:e.spacing.unit},paper:{textAlign:"center",padding:20},rightIcon:{marginLeft:e.spacing.unit},title:{fontSize:14},textField:{marginLeft:e.spacing.unit,marginRight:e.spacing.unit,width:"90%"},formControl:{margin:3*e.spacing.unit},root:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){B(e,t,n[t])})}return e}({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,backgroundColor:e.palette.background.paper})}};function z(e){return(z="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t,n,a){U||(U="function"===typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103);var o=e&&e.defaultProps,i=arguments.length-3;if(t||0===i||(t={children:void 0}),t&&o)for(var r in o)void 0===t[r]&&(t[r]=o[r]);else t||(t=o||{});if(1===i)t.children=a;else if(i>1){for(var c=new Array(i),s=0;s<i;s++)c[s]=arguments[s+3];t.children=c}return{$$typeof:U,type:e,key:void 0===n?null:""+n,ref:null,props:t,_owner:null}}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){Q(e,t,n[t])})}return e}function $(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var X=G(R.a,{},void 0,G(F.a,{})),Y=G(m.a,{variant:"h5"},void 0,"System Information"),Z=G("p",{},void 0," loading data"),ee=G(m.a,{variant:"h5"},void 0,"Port Service"),te=G(m.a,{variant:"subtitle2",gutterBottom:!0},void 0,"Serial Port Communication and Information for the unit to connect to the System"),ne=function(e){function t(e){var n,a,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,o=V(t).call(this,e),n=!o||"object"!==z(o)&&"function"!==typeof o?K(a):o,Q(K(K(n)),"getPortsData",function(){var e=n.props.dispatch;window.client.exchange.portService.returnAllPorts().then(function(t){var n;e((n=t,{type:A.d,value:n}))})}),Q(K(K(n)),"handleChange",function(e){return function(t){var a=n.state.meshState,o=t.target.value;n.setState(function(t){return W({},t,{meshState:W({},a,Q({},e,o))})})}}),Q(K(K(n)),"handleSubmit",function(){var e=n.props.dispatch,t=n.state.meshState;window.client.exchange.data.set("persist",t,{noPublish:!1},function(n){n&&console.log(n),e(J(t))})}),Q(K(K(n)),"handleReset",function(){window.client.exchange.app.resetApp()}),n.handleReset=n.handleReset.bind(K(K(n))),n.state={runOnce:!1,meshState:{id:"",name:"",locale:"",deviceType:"EDGE",setupComplete:!1,services:{portService:"stopped"},useExternalDb:!1},comPorts:[]},n.props.connectedToMesh&&(n.props.dispatch({type:A.b}),n.state.runOnce=!0),n.addListen(),n}var n,i,r;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,a["Component"]),n=t,(i=[{key:"addListen",value:function(){var e=this.props.dispatch;window.client.data.on("/_data/data/persist",{initialCallback:!0},function(t){e(J(t))},function(e,t){e&&console.log(e,t)})}},{key:"componentWillReceiveProps",value:function(e){this.props.connectedToMesh||(this.setState(function(t){return W({},t,{runOnce:!0,meshState:e.meshState})}),this.props.dispatch({type:A.b})),this.state.meshState!==e.meshState&&this.setState(function(t){return W({},t,{meshState:e.meshState})}),this.state.meshState!==this.props.meshState&&this.setState(function(t){return W({},t,{meshState:e.meshState})})}},{key:"render",value:function(){var e=this.props.classes,t=this.props.comPorts.map(function(e){return G(T.a,{button:!0},e.comName,X,G(D.a,{primary:e.comName}))}),n=G("form",{noValidate:!0,autoComplete:"off"},void 0,G(h.a,{id:"a-id",label:"Unit ID",className:e.textField,value:this.state.meshState.id,onChange:this.handleChange("id"),margin:"normal",variant:"outlined"}),G(h.a,{id:"a-name",label:"Unit Name",className:e.textField,value:this.state.meshState.name,onChange:this.handleChange("name"),margin:"normal",variant:"outlined"}),G(h.a,{id:"a-type",label:"Device Type",className:e.textField,value:this.state.meshState.deviceType,onChange:this.handleChange("meshType"),margin:"normal",variant:"outlined"}),G(h.a,{id:"Unit Location",label:"locale",className:e.textField,value:this.state.meshState.locale,onChange:this.handleChange("locale"),margin:"normal",variant:"outlined"}),G(j.a,{disabled:!0,control:G(C.a,{checked:this.state.meshState.setupComplete}),label:"Setup Complete"}),G("div",{},void 0,G(g.a,{variant:"contained",color:"default",className:e.button,onClick:this.handleSubmit},void 0,"Write Changes",G(S.a,{className:e.rightIcon})),G(g.a,{variant:"contained",color:"default",className:e.button,onClick:this.handleReset},void 0,"Reset to Default"))),a=G(x.a,{},void 0,t);return G(o.a,{title:"System Settings",wrapContent:!0},void 0,G(u.a,{container:!0,spacing:24},void 0,G(u.a,{item:!0,xs:6},void 0,G(d.a,{square:!0,className:e.root,elevation:1},void 0,Y,G(m.a,{variant:"subtitle2",gutterBottom:!0},void 0,"Ensure that the correct information is set to identify this unit",this.props.connectedToMesh?n:Z))),G(u.a,{item:!0,xs:6},void 0,G(d.a,{square:!0,className:e.root,elevation:1},void 0,ee,te,G(g.a,{variant:"contained",color:"default",className:e.button,onClick:this.getPortsData},void 0,"Get Ports"),a))))}}])&&$(n.prototype,i),r&&$(n,r),t}(),ae=Object(i.b)({meshState:Object(i.a)(L,function(e){return e.get("mesh").toJS()}),client:Object(i.a)(M,function(e){return e.get("client")}),comPorts:Object(i.a)(L,function(e){return e.get("comPorts").toJS()}),connectedToMesh:Object(i.a)(M,function(e){return e.get("isConnectedToMesh")})}),oe=Object(c.connect)(ae,function(e){return{dispatch:e}});t.default=Object(s.compose)(oe,Object(r.withStyles)(function(e){return W({},Object(O.a)(e),q(e))},{withTheme:!0}))(ne)}}]);